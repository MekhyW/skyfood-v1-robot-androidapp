import{C as e,r as t,e as l,y as o,aZ as i,a1 as s,w as a,c as r,I as n,J as c,a as d,M as u,u as p,K as m,L as v,a3 as f,R as g,P as b,O as h,T as y,b3 as S,b2 as k,o as w,U as _}from"./@vue-73fba911.js";import{_ as x}from"./floorl-cd6ae1bf.js";import{S as j,a as I}from"./swiper-276df855.js";import{B as C}from"./bookmark-8c5bb33e.js";import{y as N,t as L,aA as P,$ as T,aB as B,aC as E,T as A,aQ as R,aD as D,aG as O,aH as G,aq as M,P as U,aF as W,at as $,_ as q}from"./index-d6250428.js";import{u as z}from"./vue-i18n-5829ac11.js";import"./ssr-window-792d0f84.js";import"./dom7-250848e3.js";import"./slide-368d8d5f.js";import"./vue-router-fe18c2fe.js";import"./pinia-118dd6fd.js";import"./element-plus-5a8aeb67.js";import"./dayjs-4c03de08.js";import"./@autoxing-9bbbdd2d.js";import"./axios-2c1be958.js";import"./websocket-963e06e0.js";import"./es5-ext-689fde2c.js";import"./lodash-es-fa68f30b.js";import"./@vueuse-171ed302.js";import"./@element-plus-c72353dc.js";import"./@ctrl-ee9bdfd4.js";import"./async-validator-efc2d198.js";import"./@popperjs-892fd7f5.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-da779ce4.js";import"./vue3-loading-overlay-a6191c09.js";import"./vue-slider-component-7621b196.js";import"./vue-6ec50eb9.js";import"./mitt-dab1f1cb.js";import"./amfe-flexible-1f7bb7f4.js";import"./@intlify-352b7567.js";const V=e=>(S("data-v-5c7d55ce"),e=e(),k(),e),J={class:"multideliverycontent"},F={class:"common-box"},H={class:"multitop"},K=[V((()=>d("img",{src:x,style:{width:"13px",height:"21px"}},null,-1)))],Q={key:1,class:"floor_list2",id:"scroll1"},Z=["id","onClick"],X=[V((()=>d("img",{class:"rotate180",src:x,style:{width:"13px",height:"21px"}},null,-1)))],Y=[V((()=>d("img",{src:x,style:{width:"13px",height:"21px"}},null,-1)))],ee={class:"floor_list2",id:"scroll2"},te=["id","onClick"],le=[V((()=>d("img",{class:"rotate180",src:x,style:{width:"13px",height:"21px"}},null,-1)))],oe={class:"mu_point_list"},ie={class:"left_pre",style:{"margin-top":"-12px"}},se={key:0,class:"left_center"},ae={class:"mu_swiper_content"},re=["onClick"],ne={key:1,class:"left_center"},ce=["onClick"],de={class:"right_pre",style:{"margin-top":"-12px"}},ue={class:"mu_dot"},pe={key:0,class:"dotscontent"},me={key:1,class:"dotscontent"},ve={class:"mu_sel_point"},fe={class:"change-smiling-box"},ge=V((()=>d("i",null,null,-1))),be={key:0},he={key:1},ye=e({beforeRouteEnter(e,t,l){l((e=>{const t=e;t.Guidelist&&(t.Guidelist.select=0,t.Guidelist=""),t.initscroll()}))}}),Se=q(e({...ye,__name:"Usher",setup(e,{expose:S}){const{t:k}=z(),x=N(),q=t(1);let V=D[2];const ye=t(),Se=t(!1),ke=t(!1),we=t(!1),_e=t(!1);let xe=null,je=null;l((()=>{var e=document.getElementById("scroll1");e&&e.addEventListener("scroll",(function(){e.scrollLeft<=10?0==Se.value&&(Se.value=!0):1==Se.value&&(Se.value=!1),e.scrollWidth-e.offsetWidth-e.scrollLeft<=10?0==ke.value&&(ke.value=!0):1==ke.value&&(ke.value=!1)}));var t=document.getElementById("scroll2");t&&t.addEventListener("scroll",(function(){t.scrollLeft<=10?0==we.value&&(we.value=!0):1==we.value&&(we.value=!1),t.scrollWidth-t.offsetWidth-t.scrollLeft<=10?0==_e.value&&(_e.value=!0):1==_e.value&&(_e.value=!1)}))})),o((()=>{var e=document.getElementById("scroll1");e&&e.removeEventListener("scroll",null);var t=document.getElementById("scroll2");t&&t.removeEventListener("scroll",null)}));const Ie=t(!1),Ce=t(1e3);i((()=>{Ee(M.value),function(){Ie.value=!1,Ce.value++;const e=localStorage.getItem("bookmarkData");if(e){const t=JSON.parse(e);console.log(t,"localBookmarkMap");let l={};const o=localStorage.getItem("areaId");W?l=t.elevator||{}:o&&(l=t[o]||{}),l.floorlist&&l.floorlist.length&&(Ie.value=!0)}}()})),s((()=>{ye.value&&(ye.value.select=0),ye.value="",U.getInstance().onDeactivated(),ye.value&&ye.value.select&&(ye.value.select=0)}));const Ne=e=>{e.select=1,ye.value?e.id==ye.value.id?(ye.value.select=0,ye.value=""):(ye.value.select=0,ye.value="",ye.value=e):ye.value=e};function Le(e){if(1==e){document.getElementById("scroll1").scrollLeft-=60}else{document.getElementById("scroll1").scrollLeft+=69}}function Pe(e){if(1==e){document.getElementById("scroll2").scrollLeft-=60}else{document.getElementById("scroll2").scrollLeft+=69}}function Te(e){xe=e}function Be(e){je=e}function Ee(e){if(1==q.value)for(let t in V.boardlist){if((V.boardlist[t][0].floorName?V.boardlist[t][0].floorName:V.boardlist[t][0].floor)==e){V.swipertab=Number(t),xe.slideTo(Number(t));break}}else for(let t in V.boardlist2){if((V.boardlist2[t][0].floorName?V.boardlist2[t][0].floorName:V.boardlist2[t][0].floor)==e){V.swipertab2=Number(t),je.slideTo(Number(t));break}}}function Ae(){if(V.boardlist&&V.boardlist.length&&V.boardlist[V.swipertab]&&V.boardlist[V.swipertab].length){let e=1==q.value?V.floorlist:V.floorlist2,t=1==q.value?V.boardlist[V.swipertab][0].floorName?V.boardlist[V.swipertab][0].floorName:V.boardlist[V.swipertab][0].floor:V.boardlist2[V.swipertab2][0].floorName?V.boardlist2[V.swipertab2][0].floorName:V.boardlist2[V.swipertab2][0].floor;for(let l in e)e[l].name==t?(e[l].sel=!0,$e(Number(l))):e[l].sel=!1}}function Re(){1==q.value?xe.slidePrev():je.slidePrev()}function De(){1==q.value?xe.slideNext():je.slideNext()}function Oe(e){V.swipertab=e.activeIndex,Ae()}function Ge(e){V.swipertab2=e.activeIndex,Ae()}function Me(e,t){let l=(1==q.value?V.boardlist:V.boardlist2)[e][t];l.select=1,ye.value?l.id==ye.value.id?(ye.value.select=0,ye.value=""):(ye.value.select=0,ye.value="",ye.value=l):ye.value=l}function Ue(e){let t=null,l=O[3];l&&l[e+""]&&(t=l[e+""]);let o={mode:B,audioId:T.audioIdset("3111027"),num:1,volume:x.customSetting.sound.switchon?x.customSetting.sound.voiceVolume:0,interval:-1,duration:-1,forcePlay:!0};return t&&(o.url=G(t.fileUrl),t.fileUrl&&(o.audioId=""),o.interval=t.ruleInterval,1==t.ruleType?o.num=t.ruleCount:2==t.ruleType&&(o.duration=t.ruleDuration)),o}function We(){let e=ye.value;if(!e)return void L.show(k("index.wxzzd"));let t=[];t.push({x:e.coordinate[0],y:e.coordinate[1],yaw:e.yaw,areaId:e.areaId,dockingRadius:e.properties&&e.properties.dockingRadius?e.properties.dockingRadius:"1",ext:{name:e.name,id:e.id},stepActs:[{type:P.OpenLight,data:{mode:1,color:x.customSetting.otherSetting.lightStrip.lightStripSwitch?x.customSetting.otherSetting.lightStrip.arriveState.lightColor:-1,feature:x.customSetting.otherSetting.lightStrip.arriveState.lightType}},{type:P.PlayAudio,data:Ue(e.id)},{type:P.InterAction},{type:P.OpenLight,data:{mode:1,color:x.customSetting.otherSetting.lightStrip.lightStripSwitch?x.customSetting.otherSetting.lightStrip.taskState.lightColor:-1,feature:x.customSetting.otherSetting.lightStrip.taskState.lightType}}]});let l=T.getDoorStation(),o={type:l.type,x:l.coordinate[0],y:l.coordinate[1],yaw:l.yaw,areaId:l.areaId,dockingRadius:l.properties&&l.properties.dockingRadius?l.properties.dockingRadius:"1",ext:{name:l.name,id:l.id},stepActs:[{type:P.OpenLight,data:{mode:1,color:x.customSetting.otherSetting.lightStrip.lightStripSwitch?x.customSetting.otherSetting.lightStrip.taskState.lightColor:-1,feature:x.customSetting.otherSetting.lightStrip.taskState.lightType}}]},i={ext:{name:"起点"},stepActs:[{type:P.OpenLight,data:{mode:1,color:x.customSetting.otherSetting.lightStrip.lightStripSwitch?x.customSetting.otherSetting.lightStrip.taskState.lightColor:-1,feature:x.customSetting.otherSetting.lightStrip.taskState.lightType}},{type:P.PlayAudio,data:{mode:B,audioId:T.audioIdset("3111026"),num:1,volume:x.customSetting.sound.switchon?x.customSetting.sound.voiceVolume:0,interval:-1,duration:-1,channel:1,forcePlay:!0}},{type:P.SetSpeed,data:{speed:x.customSetting.delivery.runSpeed/100}}]},s={name:"引领任务"+(new Date).getTime(),runNum:1,runMode:+(x.customSetting.basic.runMode||1),taskType:E(),runType:28,curPt:i,pts:t,backPt:o,ignorePublicSite:!0};x.isBack=!1,A.getInstance().startTask(s)}function $e(e){var t=document.getElementById("id"+Number(e));t&&t.scrollIntoView({block:"center",inline:"center",behavior:"auto"})}function qe(){x.stapuplabel=1,R.getInstance().showAnimation("ylAnimation")}return t(0),a((()=>M.value),((e,t)=>{Ee(e)})),a((()=>$.value),((e,t)=>{2==x.businessScene&&(q.value=1)})),S({Guidelist:ye,userstore:x,initscroll:function(){let e=1==q.value?V.floorlist:V.floorlist2;for(let t in e)e[t].sel&&$e(Number(t))}}),(e,t)=>(w(),r("div",J,[n(d("div",F,[d("div",H,[n(d("div",{class:u(p(V).floorlist.length>0?"floor_content":"floor_content2")},[p(V).floorlist.length>5?(w(),r("div",{key:0,class:u(Se.value?"floorleft_per1":"floorleft_per2"),onClick:t[0]||(t[0]=e=>Le(1))},K,2)):m("",!0),p(V).floorlist.length>0?(w(),r("div",Q,[(w(!0),r(v,null,f(p(V).floorlist,((e,t)=>(w(),r("div",{id:"id"+t,class:u(e.sel?"one_floor":"nosel_floor"),onClick:t=>Ee(e.name),key:t},y(e.name),11,Z)))),128))])):m("",!0),p(V).floorlist.length>5?(w(),r("div",{key:2,class:u(ke.value?"floorright_per1":"floorright_per2"),onClick:t[1]||(t[1]=e=>Le(2))},X,2)):m("",!0)],2),[[c,1==q.value]]),n(d("div",{class:u(p(V).floorlist2.length>0?"floor_content":"floor_content2")},[p(V).floorlist2.length>5?(w(),r("div",{key:0,class:u(we.value?"floorleft_per1":"floorleft_per2"),onClick:t[2]||(t[2]=e=>Pe(1))},Y,2)):m("",!0),d("div",ee,[(w(!0),r(v,null,f(p(V).floorlist2,((e,t)=>(w(),r("div",{id:"id"+t,class:u(e.sel?"one_floor":"nosel_floor"),onClick:t=>Ee(e.name),key:t},y(e.name),11,te)))),128))]),p(V).floorlist2.length>5?(w(),r("div",{key:1,class:u(_e.value?"floorright_per1":"floorright_per2"),onClick:t[3]||(t[3]=e=>Pe(2))},le,2)):m("",!0)],2),[[c,2==q.value]])]),d("div",oe,[d("div",ie,[1==q.value&&p(V).floorlist.length>0?(w(),r("span",{key:0,onClick:Re,class:u([0==p(V).swipertab?"disable-pre":"active-pre","swiper-button-prev"])},null,2)):m("",!0),2==q.value&&p(V).floorlist2.length>0?(w(),r("span",{key:1,onClick:Re,class:u([0==p(V).swipertab2?"disable-pre":"active-pre","swiper-button-prev"])},null,2)):m("",!0)]),1==q.value?(w(),r("div",se,[d("div",ae,[g(p(j),{style:{width:"100%",height:"100%"},initialSlide:p(V).swipertab,"slides-per-view":1,"space-between":50,onSwiper:Te,onSlideChange:Oe},{default:b((()=>[(w(!0),r(v,null,f(p(V).boardlist,((e,t)=>(w(),h(p(I),{key:t,class:"slideone"},{default:b((()=>[(w(!0),r(v,null,f(e,((e,l)=>(w(),r("div",{key:l,onClick:e=>Me(t,l),class:u(1==e.select?"mu_one_Point font1":"mu_one_Point2 font1"),style:_(e.name?"":"display:none")},[d("span",null,y(e.name),1)],14,re)))),128))])),_:2},1024)))),128))])),_:1},8,["initialSlide"])])])):m("",!0),2==q.value?(w(),r("div",ne,[g(p(j),{style:{width:"100%",height:"100%"},initialSlide:p(V).swipertab2,"slides-per-view":1,"space-between":50,onSwiper:Be,onSlideChange:Ge},{default:b((()=>[(w(!0),r(v,null,f(p(V).boardlist2,((e,t)=>(w(),h(p(I),{class:"mu_swiper_content",key:t},{default:b((()=>[(w(!0),r(v,null,f(e,((e,l)=>(w(),r("div",{key:l,onClick:e=>Me(t,l),class:u(1==e.select?"mu_one_Point font1":"mu_one_Point2 font1"),style:_(e.name?"":"display:none")},[d("span",null,y(e.name),1)],14,ce)))),128))])),_:2},1024)))),128))])),_:1},8,["initialSlide"])])):m("",!0),d("div",de,[1==q.value&&p(V).floorlist.length>0?(w(),r("span",{key:0,onClick:De,class:u([p(V).swipertab==p(V).boardlist.length-1?"disable-pre":"active-pre","swiper-button-next"])},null,2)):m("",!0),2==q.value&&p(V).floorlist2.length>0?(w(),r("span",{key:1,onClick:De,class:u([p(V).swipertab2==p(V).boardlist2.length-1?"disable-pre":"active-pre","swiper-button-next"])},null,2)):m("",!0)])]),d("div",ue,[1==q.value?(w(),r("div",pe,[(w(!0),r(v,null,f(p(V).boardlist,((e,t)=>(w(),r("div",{class:u(t==p(V).swipertab?"one_dot":"one_dot2")},null,2)))),256))])):m("",!0),2==q.value?(w(),r("div",me,[(w(!0),r(v,null,f(p(V).boardlist2,((e,t)=>(w(),r("div",{class:u(t==p(V).swipertab2?"one_dot":"one_dot2")},null,2)))),256))])):m("",!0)])],512),[[c,!Ie.value]]),Ie.value?(w(),h(C,{key:Ce.value,isBookmarkType:Ie.value,onSelectPosition:Ne},null,8,["isBookmarkType"])):m("",!0),d("div",ve,[d("div",fe,[d("div",{class:"change-box btn",onClick:qe},[ge,d("span",null,y(e.$t("task.qhbq")),1)])]),d("div",{class:"guide_task font1",onClick:We},[p(x).isModify?(w(),r("span",be,y(e.$t("index.xgrw")),1)):(w(),r("span",he,y(e.$t("index.ljcf")),1))])])]))}}),[["__scopeId","data-v-5c7d55ce"]]);export{Se as default};
