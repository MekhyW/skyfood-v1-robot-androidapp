import{R as s,_ as e}from"./index-bc582883.js";import{y as o,aX as t,R as a,$ as l,X as n,a as i,a$ as c,d as u,L as d,b0 as r,ay as m,_ as p}from"./index-d6250428.js";import{s as v}from"./pinia-118dd6fd.js";import{H as h}from"./hotelDialog-e4dd1514.js";import{C as f,r as b,aZ as x,a1 as g,w as j,c as y,R as w,u as S,a as I,T as $,a4 as T,K as _,M as k,b3 as B,b2 as q,o as C}from"./@vue-73fba911.js";import"./vue-router-fe18c2fe.js";import"./vue-i18n-5829ac11.js";import"./@intlify-352b7567.js";import"./element-plus-5a8aeb67.js";import"./dayjs-4c03de08.js";import"./@autoxing-9bbbdd2d.js";import"./axios-2c1be958.js";import"./websocket-963e06e0.js";import"./es5-ext-689fde2c.js";import"./lodash-es-fa68f30b.js";import"./@vueuse-171ed302.js";import"./@element-plus-c72353dc.js";import"./@ctrl-ee9bdfd4.js";import"./async-validator-efc2d198.js";import"./@popperjs-892fd7f5.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-da779ce4.js";import"./vue3-loading-overlay-a6191c09.js";import"./vue-slider-component-7621b196.js";import"./vue-6ec50eb9.js";import"./mitt-dab1f1cb.js";import"./swiper-276df855.js";import"./ssr-window-792d0f84.js";import"./dom7-250848e3.js";import"./amfe-flexible-1f7bb7f4.js";const D=s=>(B("data-v-197a6cc5"),s=s(),q(),s),N={class:"save-box"},F={key:0,class:"position-info"},P={class:"top-right"},z={class:""},A=D((()=>I("div",null,[I("span"),I("span"),I("span")],-1))),E={class:"step-active"},R={class:"info-contain"},V={class:"box_name"},O=D((()=>I("br",null,null,-1))),X={class:"box_tip"},H={class:"box_sure"},J={class:"footer-box"},K={key:0,class:"bottom_div"},L={class:"down-times"},M={key:1,class:"position-info"},Z=D((()=>I("div",{class:"top-right"},null,-1))),G={class:"info-contain mb70"},Q={class:"box_name"},U=D((()=>I("br",null,null,-1))),W={class:"box_name"},Y={class:"down-times"},ss={class:"box_tip"},es=D((()=>I("img",{src:e,alt:""},null,-1))),os={class:"footer-box"},ts={class:"label_num"},as={key:2,class:"position-info"},ls=D((()=>I("div",{class:"top-right"},null,-1))),ns={class:"info-contain mb70"},is={class:"box_tip_large"},cs={class:"box_tip_large"},us={class:"box_tip"},ds={class:"footer-box"},rs=p(f({__name:"saveBox",setup(e){const p=o(),f=t(),B=v(f).address,{boxData:q,residueNem:D,isBoorError:rs}=v(f),ms=b("1"),ps=b(f.hotelSetting.sendFoodTime);let vs=b(!1),hs=b(!1);x((()=>{m.on("doorStatus",(s=>{if(console.log(JSON.stringify(s)+55555555555),d.loginfoNew("hotelData","doorStatus=>",{doorStatus:s}),1===s.type)bs(),fs(),vs.value=!0;else if(3===s.type){d.loginfoNew("hotelData","doorStatus=>3",{doorStatus:s});const e=D.value?f.hotelSetting.notFullyTime:10;d.loginfoNew("hotelData","doorStatus=>4",{leaveTime:e}),bs(e),d.loginfoNew("hotelData","doorStatus=>5",{leaveTime:e}),fs(),d.loginfoNew("hotelData","doorStatus=>6",{leaveTime:e}),ms.value="2"}else 4===s.type&&(h.close(),u.push({path:"/hotel/homes"}))})),ms.value=rs.value||"1",bs(),a.getInstance().setPlayAudio({mode:1,url:"",audioId:l.audioIdset("3121030"),volume:p.customSetting.sound.switchon?p.customSetting.sound.voiceVolume:0,interval:-1,num:1,duration:10,forcePlay:!0})})),g((()=>{m.off("doorStatus"),n.getInstance().removeTime("saveBox")})),j((()=>f.isBoorError),((s,e,o)=>{s&&(ms.value=rs.value)}));const fs=()=>{n.getInstance().startTime("saveBox",1e3,ps.value,(s=>(ps.value=s,d.loginfoNew("hotelData","doorStatus=>7+"+ps.value,{item:ps.value}),0===s&&("1"===ms.value?gs():ys()),!r.isShowStatus())))};function bs(s=""){n.getInstance().stopTime("saveBox"),vs.value=!1,hs.value=!1,ps.value=s||f.hotelSetting.sendFoodTime}const xs=(s,e)=>{a.getInstance().setPlayAudio({mode:1,url:"",audioId:l.audioIdset("3121031"),volume:p.customSetting.sound.switchon?p.customSetting.sound.voiceVolume:0,interval:-1,num:1,duration:10,forcePlay:!0}),n.getInstance().removeTime("saveBox")};function gs(){vs.value&&(i.showTimes(),hs.value=!0,c.getInstance().closeBox(3).then((s=>{n.getInstance().removeTime("saveBox"),a.getInstance().setPlayAudio({mode:1,url:"",audioId:l.audioIdset("3121032"),volume:p.customSetting.sound.switchon?p.customSetting.sound.voiceVolume:0,interval:-1,num:1,duration:10,forcePlay:!0})})))}const js=()=>{n.getInstance().removeTime("saveBox"),vs.value?h.show({data:{errType:3},type:"success",sure:()=>{i.showTimes(),c.getInstance().cancelTask().then((s=>{}))},cancel:()=>{fs(),h.close()}}):u.push({path:"/hotel/homes"})};function ys(){n.getInstance().removeTime("saveBox"),c.getInstance().startTask()}function ws(){u.push({path:"/hotel/sendFood"})}function Ss(){c.getInstance().clearBoxBoorError(),u.push({path:"/hotel/homes"})}return(e,o)=>(C(),y("div",N,[w(s,{isSendFoodSuccess:ms.value,isClose:S(hs),onOpenBox:xs},null,8,["isSendFoodSuccess","isClose"]),"1"===ms.value?(C(),y("div",F,[I("div",P,[I("span",z,"1."+$(e.$t("hotel.txdz")),1),A,I("span",E,"2."+$(e.$t("hotel.kxfw")),1)]),I("div",R,[I("span",V,[T($(e.$t("hotel.qw"))+$(S(B).name),1),O]),I("span",X,$(e.$t("hotel.qdjkxxgkqxm")),1),I("span",H,$(e.$t("hotel.qrfhhqdjgbxm")),1)]),I("div",J,[S(vs)?(C(),y("div",K,[I("span",L,$(ps.value)+"s",1),T($(e.$t("hotel.hzdgx")),1)])):_("",!0),I("div",{class:k(["close-btn",S(vs)?"":"disabled"]),onClick:gs},[I("span",null,$(e.$t("hotel.gbxm")),1)],2),I("div",{class:"cancel-btn",onClick:js},[I("span",null,$(e.$t("hotel.qxbcrw")),1)])])])):_("",!0),"2"===ms.value?(C(),y("div",M,[Z,I("div",G,[I("span",Q,[T($(e.$t("hotel.fhwc")),1),U]),I("span",W,[T($(e.$t("hotel.jz")),1),I("span",Y,$(ps.value)+"s",1),T($(e.$t("hotel.hlk")),1)]),I("span",ss,[es,T($(e.$t("hotel.gxndsy")),1)])]),I("div",os,[I("div",{class:"close-btn",onClick:ys},[I("span",null,$(e.$t("hotel.ljcf")),1)]),S(D)?(C(),y("div",{key:0,class:"cancel-btn",onClick:ws},[I("span",null,$(e.$t("hotel.xrw")),1),I("span",ts,$(e.$t("hotel.kyxg"))+$(S(D)),1)])):_("",!0)])])):_("",!0),"error"===ms.value?(C(),y("div",as,[ls,I("div",ns,[I("span",is,$(e.$t("hotel.hbq")),1),I("span",cs,$(e.$t("hotel.xmcxyc")),1),I("span",us,$(e.$t("hotel.rwwfjxzxqlxgly")),1)]),I("div",ds,[I("div",{class:"close-btn",onClick:Ss},[I("span",null,$(e.$t("hotel.fhsy")),1)])])])):_("",!0)]))}}),[["__scopeId","data-v-197a6cc5"]]);export{rs as default};
