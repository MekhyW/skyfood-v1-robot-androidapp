import{C as e,r as t,e as l,aZ as o,a1 as s,w as i,c as a,I as r,J as n,a as d,M as u,u as c,K as p,L as f,a3 as v,R as m,P as b,O as g,T as h,o as y,U as k,b3 as w,b2 as _}from"./@vue-73fba911.js";import{_ as S}from"./floorl-cd6ae1bf.js";import{S as j,a as x}from"./swiper-276df855.js";import{B as C}from"./bookmark-8c5bb33e.js";import{D as I}from"./delivery-box-a21efe7d.js";import{y as N,t as P,aA as T,aB as L,$ as B,aC as E,T as D,aD as G,aG as A,aH as R,aq as M,P as O,aF as W,at as z,_ as V}from"./index-d6250428.js";import{u as $}from"./vue-i18n-5829ac11.js";import"./ssr-window-792d0f84.js";import"./dom7-250848e3.js";import"./slide-368d8d5f.js";import"./vue-router-fe18c2fe.js";import"./pinia-118dd6fd.js";import"./element-plus-5a8aeb67.js";import"./dayjs-4c03de08.js";import"./@autoxing-9bbbdd2d.js";import"./axios-2c1be958.js";import"./websocket-963e06e0.js";import"./es5-ext-689fde2c.js";import"./lodash-es-fa68f30b.js";import"./@vueuse-171ed302.js";import"./@element-plus-c72353dc.js";import"./@ctrl-ee9bdfd4.js";import"./async-validator-efc2d198.js";import"./@popperjs-892fd7f5.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-da779ce4.js";import"./vue3-loading-overlay-a6191c09.js";import"./vue-slider-component-7621b196.js";import"./vue-6ec50eb9.js";import"./mitt-dab1f1cb.js";import"./amfe-flexible-1f7bb7f4.js";import"./@intlify-352b7567.js";const J=e=>(w("data-v-4d8ebd32"),e=e(),_(),e),U={class:"multideliverycontent"},q={class:"common-box"},F={class:"multitop"},H=[J((()=>d("img",{src:S,style:{width:"13px",height:"21px"}},null,-1)))],K={key:1,class:"floor_list2",id:"scroll1"},Z=["id","onClick"],Q=[J((()=>d("img",{class:"rotate180",src:S,style:{width:"13px",height:"21px"}},null,-1)))],X=[J((()=>d("img",{src:S,style:{width:"13px",height:"21px"}},null,-1)))],Y={class:"floor_list2",id:"scroll2"},ee=["id","onClick"],te=[J((()=>d("img",{class:"rotate180",src:S,style:{width:"13px",height:"21px"}},null,-1)))],le={class:"mu_point_list"},oe={class:"left_pre",style:{"margin-top":"-12px"}},se={key:0,class:"left_center"},ie={class:"mu_swiper_content"},ae=["onClick"],re={key:1,class:"left_center"},ne=["onClick"],de={class:"right_pre",style:{"margin-top":"-12px"}},ue={class:"mu_dot"},ce={key:0,class:"dotscontent"},pe={key:1,class:"dotscontent"},fe={class:"start-box"},ve={class:"mu_sel_point"},me={key:0},be={key:1},ge=e({beforeRouteEnter(e,t,l){l((e=>{const t=e;t.Guidelist&&(t.Guidelist.select=0,t.Guidelist=""),t.initscroll()}))}}),he=V(e({...ge,__name:"Guide",setup(e,{expose:w}){const{t:_}=$(),S=N(),V=t(1);let J=G[2];const ge=t(),he=t(!1),ye=t(!1),ke=t(!1),we=t(!1);let _e=null,Se=null;l((()=>{var e=document.getElementById("scroll1");e&&e.addEventListener("scroll",(function(){e.scrollLeft<=10?0==he.value&&(he.value=!0):1==he.value&&(he.value=!1),e.scrollWidth-e.offsetWidth-e.scrollLeft<=10?0==ye.value&&(ye.value=!0):1==ye.value&&(ye.value=!1)}));var t=document.getElementById("scroll2");t&&t.addEventListener("scroll",(function(){t.scrollLeft<=10?0==ke.value&&(ke.value=!0):1==ke.value&&(ke.value=!1),t.scrollWidth-t.offsetWidth-t.scrollLeft<=10?0==we.value&&(we.value=!0):1==we.value&&(we.value=!1)}))}));const je=t(!1),xe=t(1e3);o((()=>{Le(M.value),function(){je.value=!1,xe.value++;const e=localStorage.getItem("bookmarkData");if(e){const t=JSON.parse(e);let l={};const o=localStorage.getItem("areaId");W?l=t.elevator||{}:o&&(l=t[o]||{}),l.floorlist&&l.floorlist.length&&(je.value=!0)}}()})),s((()=>{ge.value&&(ge.value.select=0),ge.value="",O.getInstance().onDeactivated(),ge.value&&ge.value.select&&(ge.value.select=0)}));const Ce=e=>{e.select=1,ge.value?e.id==ge.value.id?(ge.value.select=0,ge.value=""):(ge.value.select=0,ge.value="",ge.value=e):ge.value=e};function Ie(e){if(1==e){document.getElementById("scroll1").scrollLeft-=60}else{document.getElementById("scroll1").scrollLeft+=69}}function Ne(e){if(1==e){document.getElementById("scroll2").scrollLeft-=60}else{document.getElementById("scroll2").scrollLeft+=69}}function Pe(e){_e=e}function Te(e){Se=e}function Le(e){if(1==V.value)for(let t in J.boardlist){if((J.boardlist[t][0].floorName?J.boardlist[t][0].floorName:J.boardlist[t][0].floor)==e){J.swipertab=Number(t),_e.slideTo(Number(t));break}}else for(let t in J.boardlist2){if((J.boardlist2[t][0].floorName?J.boardlist2[t][0].floorName:J.boardlist2[t][0].floor)==e){J.swipertab2=Number(t),Se.slideTo(Number(t));break}}}function Be(){if(J.boardlist&&J.boardlist.length&&J.boardlist[J.swipertab]&&J.boardlist[J.swipertab].length){let e=1==V.value?J.floorlist:J.floorlist2,t=1==V.value?J.boardlist[J.swipertab][0].floorName?J.boardlist[J.swipertab][0].floorName:J.boardlist[J.swipertab][0].floor:J.boardlist2[J.swipertab2][0].floorName?J.boardlist2[J.swipertab2][0].floorName:J.boardlist2[J.swipertab2][0].floor;for(let l in e)e[l].name==t?(e[l].sel=!0,We(Number(l))):e[l].sel=!1}}function Ee(){1==V.value?_e.slidePrev():Se.slidePrev()}function De(){1==V.value?_e.slideNext():Se.slideNext()}function Ge(e){J.swipertab=e.activeIndex,Be()}function Ae(e){J.swipertab2=e.activeIndex,Be()}function Re(e,t){let l=(1==V.value?J.boardlist:J.boardlist2)[e][t];l.select=1,ge.value?l.id==ge.value.id?(ge.value.select=0,ge.value=""):(ge.value.select=0,ge.value="",ge.value=l):ge.value=l}function Me(e){let t=null,l=A[3];if(l&&l[e+""]&&(t=l[e+""]),t){let e={mode:L,url:R(t.fileUrl),volume:S.customSetting.sound.switchon?S.customSetting.sound.voiceVolume:0,interval:t.ruleInterval,duration:-1};return 1==t.ruleType?e.num=t.ruleCount:2==t.ruleType&&(e.duration=t.ruleDuration),e}return{}}function Oe(){let e=ge.value;if(!e)return void P.show(_("index.wxzzd"));let t=[];t.push({x:e.coordinate[0],y:e.coordinate[1],yaw:e.yaw,areaId:e.areaId,dockingRadius:e.properties&&e.properties.dockingRadius?e.properties.dockingRadius:"1",ext:{name:e.name,id:e.id},stepActs:[{type:T.OpenLight,data:{mode:1,color:S.customSetting.otherSetting.lightStrip.lightStripSwitch?S.customSetting.otherSetting.lightStrip.arriveState.lightColor:-1,feature:S.customSetting.otherSetting.lightStrip.arriveState.lightType}},{type:T.PlayAudio,data:Me(e.id)}]});let l={ext:{name:"起点"},stepActs:[{type:T.OpenLight,data:{mode:1,color:S.customSetting.otherSetting.lightStrip.lightStripSwitch?S.customSetting.otherSetting.lightStrip.taskState.lightColor:-1,feature:S.customSetting.otherSetting.lightStrip.taskState.lightType}},{type:T.PlayAudio,data:{mode:L,audioId:B.audioIdset("3111012"),num:1,volume:S.customSetting.sound.switchon?S.customSetting.sound.voiceVolume:0,interval:-1,duration:-1,channel:1,forcePlay:!0}},{type:T.SetSpeed,data:{speed:S.customSetting.delivery.runSpeed/100}}]},o={name:"直达任务"+(new Date).getTime(),runNum:1,runMode:+(S.customSetting.basic.runMode||1),taskType:E(),runType:22,curPt:l,pts:t,backPt:{},ignorePublicSite:!0};D.getInstance().startTask(o)}function We(e){var t=document.getElementById("id"+Number(e));t&&t.scrollIntoView({block:"center",inline:"center",behavior:"auto"})}return i((()=>M.value),((e,t)=>{Le(e)})),i((()=>z.value),((e,t)=>{2==S.businessScene&&(V.value=1)})),w({Guidelist:ge,userstore:S,initscroll:function(){let e=1==V.value?J.floorlist:J.floorlist2;for(let t in e)e[t].sel&&We(Number(t))}}),(e,t)=>(y(),a("div",U,[r(d("div",q,[d("div",F,[r(d("div",{class:u(c(J).floorlist.length>0?"floor_content":"floor_content2")},[c(J).floorlist.length>5?(y(),a("div",{key:0,class:u(he.value?"floorleft_per1":"floorleft_per2"),onClick:t[0]||(t[0]=e=>Ie(1))},H,2)):p("",!0),c(J).floorlist.length>0?(y(),a("div",K,[(y(!0),a(f,null,v(c(J).floorlist,((e,t)=>(y(),a("div",{id:"id"+t,class:u(e.sel?"one_floor":"nosel_floor"),onClick:t=>Le(e.name),key:t},h(e.name),11,Z)))),128))])):p("",!0),c(J).floorlist.length>5?(y(),a("div",{key:2,class:u(ye.value?"floorright_per1":"floorright_per2"),onClick:t[1]||(t[1]=e=>Ie(2))},Q,2)):p("",!0)],2),[[n,1==V.value]]),r(d("div",{class:u(c(J).floorlist2.length>0?"floor_content":"floor_content2")},[c(J).floorlist2.length>5?(y(),a("div",{key:0,class:u(ke.value?"floorleft_per1":"floorleft_per2"),onClick:t[2]||(t[2]=e=>Ne(1))},X,2)):p("",!0),d("div",Y,[(y(!0),a(f,null,v(c(J).floorlist2,((e,t)=>(y(),a("div",{id:"id"+t,class:u(e.sel?"one_floor":"nosel_floor"),onClick:t=>Le(e.name),key:t},h(e.name),11,ee)))),128))]),c(J).floorlist2.length>5?(y(),a("div",{key:1,class:u(we.value?"floorright_per1":"floorright_per2"),onClick:t[3]||(t[3]=e=>Ne(2))},te,2)):p("",!0)],2),[[n,2==V.value]])]),d("div",le,[d("div",oe,[1==V.value&&c(J).floorlist.length>0?(y(),a("span",{key:0,onClick:Ee,class:u([0==c(J).swipertab?"disable-pre":"active-pre","swiper-button-prev"])},null,2)):p("",!0),2==V.value&&c(J).floorlist2.length>0?(y(),a("span",{key:1,onClick:Ee,class:u([0==c(J).swipertab2?"disable-pre":"active-pre","swiper-button-prev"])},null,2)):p("",!0)]),1==V.value?(y(),a("div",se,[d("div",ie,[m(c(j),{style:{width:"100%",height:"100%"},initialSlide:c(J).swipertab,"slides-per-view":1,"space-between":50,onSwiper:Pe,onSlideChange:Ge},{default:b((()=>[(y(!0),a(f,null,v(c(J).boardlist,((e,t)=>(y(),g(c(x),{key:t,class:"slideone"},{default:b((()=>[(y(!0),a(f,null,v(e,((e,l)=>(y(),a("div",{key:l,onClick:e=>Re(t,l),class:u(1==e.select?"mu_one_Point font1":"mu_one_Point2 font1"),style:k(e.name?"":"display:none")},[d("span",null,h(e.name),1)],14,ae)))),128))])),_:2},1024)))),128))])),_:1},8,["initialSlide"])])])):p("",!0),2==V.value?(y(),a("div",re,[m(c(j),{style:{width:"100%",height:"100%"},initialSlide:c(J).swipertab2,"slides-per-view":1,"space-between":50,onSwiper:Te,onSlideChange:Ae},{default:b((()=>[(y(!0),a(f,null,v(c(J).boardlist2,((e,t)=>(y(),g(c(x),{class:"mu_swiper_content",key:t},{default:b((()=>[(y(!0),a(f,null,v(e,((e,l)=>(y(),a("div",{key:l,onClick:e=>Re(t,l),class:u(1==e.select?"mu_one_Point font1":"mu_one_Point2 font1"),style:k(e.name?"":"display:none")},[d("span",null,h(e.name),1)],14,ne)))),128))])),_:2},1024)))),128))])),_:1},8,["initialSlide"])])):p("",!0),d("div",de,[1==V.value&&c(J).floorlist.length>0?(y(),a("span",{key:0,onClick:De,class:u([c(J).swipertab==c(J).boardlist.length-1?"disable-pre":"active-pre","swiper-button-next"])},null,2)):p("",!0),2==V.value&&c(J).floorlist2.length>0?(y(),a("span",{key:1,onClick:De,class:u([c(J).swipertab2==c(J).boardlist2.length-1?"disable-pre":"active-pre","swiper-button-next"])},null,2)):p("",!0)])]),d("div",ue,[1==V.value?(y(),a("div",ce,[(y(!0),a(f,null,v(c(J).boardlist,((e,t)=>(y(),a("div",{class:u(t==c(J).swipertab?"one_dot":"one_dot2")},null,2)))),256))])):p("",!0),2==V.value?(y(),a("div",pe,[(y(!0),a(f,null,v(c(J).boardlist2,((e,t)=>(y(),a("div",{class:u(t==c(J).swipertab2?"one_dot":"one_dot2")},null,2)))),256))])):p("",!0)])],512),[[n,!je.value]]),je.value?(y(),g(C,{key:xe.value,isBookmarkType:je.value,onSelectPosition:Ce},null,8,["isBookmarkType"])):p("",!0),d("div",fe,[m(I),d("div",ve,[d("div",{class:"guide_task font1",onClick:Oe},[c(S).isModify?(y(),a("span",me,h(e.$t("index.xgrw")),1)):(y(),a("span",be,h(e.$t("index.ljcf")),1))])])])]))}}),[["__scopeId","data-v-4d8ebd32"]]);export{he as default};
